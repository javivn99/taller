CREATE TABLE IF NOT EXISTS `taller`.`TALLER` (
  `NIF` INT(3),
  `NOMBRE` VARCHAR(45) NOT NULL,
  `LOCALIDAD` VARCHAR(60) NOT NULL,
  `COD_POSTAL` INT(5) NOT NULL,
  `TLF` INT(9) NOT NULL,
  PRIMARY KEY (`NIF`),
  UNIQUE INDEX `TLF_UNIQUE` (`TLF` ASC) VISIBLE)
ENGINE = InnoDB;

INSERT INTO  `taller`.`TALLER` (`NIF`, `NOMBRE`, `LOCALIDAD`, `COD_POSTAL`, `TLF`) VALUES
(1, 'TALLER PISTON', 'SALAMANCA', 37002, 983429730);

CREATE TABLE IF NOT EXISTS `taller`.`MECANICO` (
  `DNI_M` VARCHAR(9),
  `NOMBRE` VARCHAR(20) NOT NULL,
  `APELLIDOS` VARCHAR(45) NOT NULL,
  `EMAIL_M` VARCHAR(80) NOT NULL,
  `CONTRASEÑA_M` VARCHAR(80) NOT NULL,
  PRIMARY KEY (`DNI_M`),
  UNIQUE INDEX `M_EMAIL_UNIQUE` (`EMAIL_M` ASC) VISIBLE)
ENGINE = InnoDB;

INSERT INTO  `taller`.`MECANICO` (`DNI_M`, `NOMBRE`, `APELLIDOS`, `EMAIL_M`,  `CONTRASEÑA_M`) VALUES
('12549876S', 'EMILIO', 'NUÑEZ DE LA SIERRA', 'emilio@admin.com','Admin7*'),
('19865478E', 'RAUL', 'SAEZ HERNANDEZ', 'raul@admin.com','Admin7*'),
('14783256A', 'SARA', 'REDONDO LOPEZ', 'sara@admin.com','Admin7*'),
('10365487M', 'PAULA', 'CUADRADO SERRANO', 'paula@admin.com','Admin7*'),
('12563048U', 'ARTURO', 'NIETO ROCHAS', 'arturo@admin.com','Admin7*'),
('12498654P', 'EZEQUIEL', 'FERNANDEZ ESPINOSA', 'ezequiel@admin.com','Admin7*');

CREATE TABLE IF NOT EXISTS `taller`.`TALLER_MECANICO` (
  `NIF` INT(3),
  `DNI_M` VARCHAR(9),
  CONSTRAINT  `T_M_nif` FOREIGN KEY (`NIF`) REFERENCES `TALLER` (`NIF`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT  `T_M_dni` FOREIGN KEY (`DNI_M`) REFERENCES `MECANICO` (`DNI_M`) ON DELETE CASCADE ON UPDATE CASCADE,
  PRIMARY KEY(`NIF`,`DNI_M`))
ENGINE = InnoDB;

INSERT INTO `taller`.`TALLER_MECANICO`(`NIF`,`DNI_M`) VALUES
('1','12549876S'), ('1','19865478E'), ('1','14783256A'), 
('1','10365487M'), ('1','12563048U'), ('1','12498654P');

CREATE TABLE IF NOT EXISTS `taller`.`CITA` (
  `N_CITA` INT PRIMARY KEY,
  `MOTIVO` VARCHAR(100) NOT NULL,
  `NIF` INT(3),
  CONSTRAINT  `CITA_nif` FOREIGN KEY (`NIF`) REFERENCES `TALLER` (`NIF`) ON DELETE CASCADE ON UPDATE CASCADE
  )
ENGINE = InnoDB;

INSERT INTO  `taller`.`CITA` (`N_CITA`, `MOTIVO`, `NIF`) VALUES
('1', 'CAMBIO DE NEUMATICOS', '1'), ('2', 'CAMBIO DE ACEITE', '1'), 
('3', 'CAMBIO DE PASTILLAS DE FRENO', '1'), 
('4', 'CAMBIO DE PARACHOQUES', '1'),
('5', 'LUNA FRONTAL', '1'),
('6', 'LIMPIEZA DEL TUBO DE ESCAPE', '1'),('7', 'CAMBIO LIQUIDO ANTI-CONGELANTE', '1'),
('8', 'CAMBIO DE RETROVISOR', '1'), ('9', 'CAMBIO DE PINTURA DEL COCHE', '1'),
('10', 'CAMBIO DE LLANTAS', '1'),('11', 'CAMBIO DE LIMPIA PARABRISAS', '1'),
('12', 'COCHE DE SUSTITUCION', '1'),('13', 'PASAR ITV', '1'),
('14', 'LIMPIEZA DE COCHE', '1'), ('15', 'OTRO', '1');

CREATE TABLE IF NOT EXISTS `taller`.`CLIENTE` (
  `DNI_C` VARCHAR(9) NOT NULL,
  `NOMBRE` VARCHAR(20) NOT NULL,
  `APELLIDOS` VARCHAR(45) NOT NULL,
  `EMAIL_C` VARCHAR(80) NOT NULL,
  `CONTRASEÑA_C` VARCHAR(80) NOT NULL,
  `MATRICULA` VARCHAR(7) NOT NULL,
  PRIMARY KEY (`DNI_C`),
  UNIQUE INDEX `C_EMAIL_UNIQUE` (`EMAIL_C` ASC) VISIBLE,
  UNIQUE INDEX `C_MATRIL_UNIQUE` (`MATRICULA` ASC) VISIBLE)
ENGINE = InnoDB;

INSERT INTO  `taller`.`CLIENTE` (`DNI_C`, `NOMBRE`, `APELLIDOS`, `EMAIL_C`, `CONTRASEÑA_C`, `MATRICULA`) VALUES
('14683000R', 'ERNESTO', 'URRUTIA GONZALEZ', 'user1@gmail.com', 'user1', '5874LSD'),
('15486548B', 'BRAULIO', 'VALDEMORO MARTIN', 'user2@gmail.com','user2','2654YTU'),
('15487965J', 'INES', 'YLLERA MENDEZ', 'user3@gmail.com','user3', '9786BPM'),
('16541635T', 'EMMA', 'MARTIN SORIA', 'user4@gmail.com','user4', '9345FQV'),
('15487896P', 'RICK', 'VEGAS RODRIGUEZ', 'user5@gmail.com','user5', '8976CNV'),
('15687868L', 'ARNALDO', 'RUIPEREZ FUERTES', 'user6@gmail.com','user6', '0982HTY'),
('14300085K', 'CAROLO', 'SANCHEZ MARTINEZ', 'user7@gmail.com','user7', '2345LKJ');

CREATE TABLE IF NOT EXISTS `taller`.`CLIENTE_CITA` (
 `DNI_C` VARCHAR(9),
 `N_CITA` INT,
 CONSTRAINT  `FK_DNI_C` FOREIGN KEY (`DNI_C`) REFERENCES `CLIENTE` (`DNI_C`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT  `FK_N_CITA` FOREIGN KEY (`N_CITA`) REFERENCES `CITA` (`N_CITA`) ON DELETE CASCADE ON UPDATE CASCADE,
 PRIMARY KEY (`DNI_C`,`N_CITA`))
ENGINE = InnoDB;

INSERT INTO `taller`.`CLIENTE_CITA`(`DNI_C`, `N_CITA`) VALUES
('14683000R','1'),('15486548B','2'),('15487965J','3'),('16541635T','4'),('15487896P','5'),('15687868L','6'),('14300085K','7');

CREATE TABLE IF NOT EXISTS `taller`.`RECAMBIO` (
  `ID` VARCHAR(3) NOT NULL,
  `PRODUCTO` VARCHAR(80) NOT NULL,
  `PRECIO` VARCHAR(15) NOT NULL,
  `STOCK` INT NOT NULL,
  `NIF` INT(3) NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT  `FK_NIF_RECAMB` FOREIGN KEY (`NIF`) REFERENCES `TALLER` (`NIF`) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB;

INSERT INTO `taller`.`RECAMBIO`(`ID`, `PRODUCTO`, `PRECIO`, `STOCK`, `NIF`) VALUES
('1','PASTILLAS DE FRENO','100€','50', '1'), ('2','TAPONES PARA LLANTA','3€','200', '1'), ('3','ACEITE PARA MOTOR','35€','45', '1'), 
('4','LIQUIDO ANTI-CONGELANTE','40€','30', '1'), ('5','LLANTAS DEPORTIVAS','600€','8', '1'),  ('6','LIMPIA PARABRISAS','25€','24', '1'), 
('7','JUNTA DE LA CULATA','600€','6', '1'), ('8','ESCAPE WALKER','90€','7', '1'), ('9','VOLANTE DE COMPETICION','55€','2', '1'), 
('10','NEUMATICOS MICHELIN','300€','32', '1'), ('11','NEUMATICOS PIRELLI','475€','23', '1'), ('12','DISCOS DE FRENO BREMBO','240€','14', '1'), 
('13','LUZ DE POSICION','1€','96', '1');